{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akash\\\\OneDrive\\\\Desktop\\\\practicemern\\\\mern-auth-project\\\\client\\\\src\\\\components\\\\TrackWorker.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Fix for default marker icons\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultIcon = L.icon({\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\nL.Marker.prototype.options.icon = defaultIcon;\nconst TrackWorker = ({\n  worker,\n  userCoords,\n  fullScreen = false,\n  setShowMap\n}) => {\n  _s();\n  const [workerCoords, setWorkerCoords] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const fetchWorkerCoords = async () => {\n    if (!(worker !== null && worker !== void 0 && worker.location)) {\n      setError('Worker location not available');\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(worker.location)}&format=json&limit=1`);\n      const data = await response.json();\n      if (data.length > 0) {\n        setWorkerCoords({\n          lat: parseFloat(data[0].lat),\n          lng: parseFloat(data[0].lon)\n        });\n      } else {\n        setError('Location not found');\n      }\n    } catch (err) {\n      setError('Failed to fetch coordinates');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (worker) fetchWorkerCoords();\n  }, [worker]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      textAlign: 'center'\n    },\n    children: \"Loading map...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      color: 'red',\n      textAlign: 'center'\n    },\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 21\n  }, this);\n  if (!workerCoords) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: fullScreen ? '100vh' : '400px',\n      width: fullScreen ? '100vw' : '100%',\n      position: 'relative'\n    },\n    children: [setShowMap && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowMap(false),\n      style: {\n        position: 'absolute',\n        top: '10px',\n        right: '10px',\n        backgroundColor: 'transparent',\n        color: 'red',\n        border: 'none',\n        fontSize: '28px',\n        cursor: 'pointer',\n        zIndex: 1000\n      },\n      children: \"\\u2716\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [workerCoords.lat, workerCoords.lng],\n      zoom: 13,\n      style: {\n        height: '100%',\n        width: '100%',\n        zIndex: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: [workerCoords.lat, workerCoords.lng],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: worker.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 43\n          }, this), worker.location]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), userCoords && /*#__PURE__*/_jsxDEV(Marker, {\n        position: [userCoords.lat, userCoords.lng],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Your Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(TrackWorker, \"/0uCR9QHFl/U6oh3w+dzWYxkj6U=\");\n_c = TrackWorker;\nexport default TrackWorker;\nvar _c;\n$RefreshReg$(_c, \"TrackWorker\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","L","jsxDEV","_jsxDEV","defaultIcon","icon","iconUrl","iconSize","iconAnchor","prototype","options","TrackWorker","worker","userCoords","fullScreen","setShowMap","_s","workerCoords","setWorkerCoords","loading","setLoading","error","setError","fetchWorkerCoords","location","response","fetch","encodeURIComponent","data","json","length","lat","parseFloat","lng","lon","err","style","padding","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","color","height","width","position","onClick","top","right","backgroundColor","border","fontSize","cursor","zIndex","center","zoom","url","attribution","name","_c","$RefreshReg$"],"sources":["C:/Users/akash/OneDrive/Desktop/practicemern/mern-auth-project/client/src/components/TrackWorker.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\n\r\n// Fix for default marker icons\r\nconst defaultIcon = L.icon({\r\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\r\n  iconSize: [25, 41],\r\n  iconAnchor: [12, 41],\r\n});\r\nL.Marker.prototype.options.icon = defaultIcon;\r\n\r\nconst TrackWorker = ({ worker, userCoords, fullScreen = false, setShowMap }) => {\r\n  const [workerCoords, setWorkerCoords] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchWorkerCoords = async () => {\r\n    if (!worker?.location) {\r\n      setError('Worker location not available');\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(\r\n        `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(\r\n          worker.location\r\n        )}&format=json&limit=1`\r\n      );\r\n      const data = await response.json();\r\n      if (data.length > 0) {\r\n        setWorkerCoords({\r\n          lat: parseFloat(data[0].lat),\r\n          lng: parseFloat(data[0].lon),\r\n        });\r\n      } else {\r\n        setError('Location not found');\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to fetch coordinates');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (worker) fetchWorkerCoords();\r\n  }, [worker]);\r\n\r\n  if (loading) return <div style={{ padding: '20px', textAlign: 'center' }}>Loading map...</div>;\r\n  if (error) return <div style={{ padding: '20px', color: 'red', textAlign: 'center' }}>{error}</div>;\r\n  if (!workerCoords) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      height: fullScreen ? '100vh' : '400px',\r\n      width: fullScreen ? '100vw' : '100%',\r\n      position: 'relative'\r\n    }}>\r\n      {/* ✖ Close Button */}\r\n      {setShowMap && (\r\n        <button\r\n          onClick={() => setShowMap(false)}\r\n          style={{\r\n            position: 'absolute',\r\n            top: '10px',\r\n            right: '10px',\r\n            backgroundColor: 'transparent',\r\n            color: 'red',\r\n            border: 'none',\r\n            fontSize: '28px',\r\n            cursor: 'pointer',\r\n            zIndex: 1000\r\n          }}\r\n        >\r\n          ✖\r\n        </button>\r\n      )}\r\n\r\n      <MapContainer\r\n        center={[workerCoords.lat, workerCoords.lng]}\r\n        zoom={13}\r\n        style={{\r\n          height: '100%',\r\n          width: '100%',\r\n          zIndex: 1\r\n        }}\r\n      >\r\n        <TileLayer\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n        />\r\n        <Marker position={[workerCoords.lat, workerCoords.lng]}>\r\n          <Popup>\r\n            <strong>{worker.name}</strong><br />\r\n            {worker.location}\r\n          </Popup>\r\n        </Marker>\r\n        {userCoords && (\r\n          <Marker position={[userCoords.lat, userCoords.lng]}>\r\n            <Popup>Your Location</Popup>\r\n          </Marker>\r\n        )}\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrackWorker;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}