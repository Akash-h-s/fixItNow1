{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akash\\\\OneDrive\\\\Desktop\\\\practicemern\\\\mern-auth-project\\\\client\\\\src\\\\components\\\\TrackWorker.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Fix for default marker icons (Leaflet bug)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultIcon = L.icon({\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\nL.Marker.prototype.options.icon = defaultIcon;\nconst TrackWorker = ({\n  worker,\n  userCoords\n}) => {\n  _s();\n  const [workerCoords, setWorkerCoords] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Fetch worker's coordinates from address\n  const fetchWorkerCoords = async () => {\n    if (!(worker !== null && worker !== void 0 && worker.location)) {\n      setError('Worker location not available');\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(worker.location)}&format=json&limit=1`);\n      const data = await response.json();\n      if (data.length > 0) {\n        setWorkerCoords({\n          lat: parseFloat(data[0].lat),\n          lng: parseFloat(data[0].lon)\n        });\n      } else {\n        setError('Location not found');\n      }\n    } catch (err) {\n      setError('Failed to fetch coordinates');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (worker) fetchWorkerCoords();\n  }, [worker]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading map...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      color: 'red'\n    },\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 21\n  }, this);\n  if (!workerCoords) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '400px',\n      width: '100%',\n      marginTop: '1rem'\n    },\n    children: /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [workerCoords.lat, workerCoords.lng],\n      zoom: 13,\n      style: {\n        height: '100%',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: [workerCoords.lat, workerCoords.lng],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: [worker.name, \"'s Location\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), userCoords && /*#__PURE__*/_jsxDEV(Marker, {\n        position: [userCoords.lat, userCoords.lng],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Your Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(TrackWorker, \"/0uCR9QHFl/U6oh3w+dzWYxkj6U=\");\n_c = TrackWorker;\nexport default TrackWorker;\nvar _c;\n$RefreshReg$(_c, \"TrackWorker\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","L","jsxDEV","_jsxDEV","defaultIcon","icon","iconUrl","iconSize","iconAnchor","prototype","options","TrackWorker","worker","userCoords","_s","workerCoords","setWorkerCoords","loading","setLoading","error","setError","fetchWorkerCoords","location","response","fetch","encodeURIComponent","data","json","length","lat","parseFloat","lng","lon","err","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","height","width","marginTop","center","zoom","borderRadius","url","position","name","_c","$RefreshReg$"],"sources":["C:/Users/akash/OneDrive/Desktop/practicemern/mern-auth-project/client/src/components/TrackWorker.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\n\r\n// Fix for default marker icons (Leaflet bug)\r\nconst defaultIcon = L.icon({\r\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\r\n  iconSize: [25, 41],\r\n  iconAnchor: [12, 41],\r\n});\r\nL.Marker.prototype.options.icon = defaultIcon;\r\n\r\nconst TrackWorker = ({ worker, userCoords }) => {\r\n  const [workerCoords, setWorkerCoords] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch worker's coordinates from address\r\n  const fetchWorkerCoords = async () => {\r\n    if (!worker?.location) {\r\n      setError('Worker location not available');\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(\r\n        `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(\r\n          worker.location\r\n        )}&format=json&limit=1`\r\n      );\r\n      const data = await response.json();\r\n      if (data.length > 0) {\r\n        setWorkerCoords({\r\n          lat: parseFloat(data[0].lat),\r\n          lng: parseFloat(data[0].lon),\r\n        });\r\n      } else {\r\n        setError('Location not found');\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to fetch coordinates');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (worker) fetchWorkerCoords();\r\n  }, [worker]);\r\n\r\n  if (loading) return <p>Loading map...</p>;\r\n  if (error) return <p style={{ color: 'red' }}>{error}</p>;\r\n  if (!workerCoords) return null;\r\n\r\n  return (\r\n    <div style={{ height: '400px', width: '100%', marginTop: '1rem' }}>\r\n      <MapContainer\r\n        center={[workerCoords.lat, workerCoords.lng]}\r\n        zoom={13}\r\n        style={{ height: '100%', borderRadius: '8px' }}\r\n      >\r\n        <TileLayer\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        <Marker position={[workerCoords.lat, workerCoords.lng]}>\r\n          <Popup>{worker.name}'s Location</Popup>\r\n        </Marker>\r\n        {userCoords && (\r\n          <Marker position={[userCoords.lat, userCoords.lng]}>\r\n            <Popup>Your Location</Popup>\r\n          </Marker>\r\n        )}\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrackWorker;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}